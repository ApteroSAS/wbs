<!DOCTYPE html>
<html lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

<head>
    
<!-- BOOTSTRAP-->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

<!-- CSS -->
<link rel="stylesheet" href="style.css">

<!-- JQUERY -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2.2.1/src/js.cookie.js" integrity="sha256-P8jY+MCe6X2cjNSmF4rQvZIanL5VwUUT4MBnOMncjRU=" crossorigin="anonymous"></script>
 
<!--  BOOTSTRAP-JAVASCRIPT -->
<script type="text/javascript" src="https://webrtchacks.github.io/adapter/adapter-latest.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

<!-- JAVASCRIPT -->
<script src="dist/wbs.js"></script> 

<title>Aptero wbs</title>
</head>

  <body>
  <div id="build">
    <div class="container-fluid"> 
      <nav class="navbar navbar-expand-sm navbar-light bg-light justify-content-between" id="top-nav">
        <a class="navbar-brand" href="https://www.aptero.co/"><img class="noll" src="src/img/logo_principal.svg" style="width: 40%;" alt="aptero"></a>
        <div class="d-none d-sm-block">
          <ul class="navbar-nav mr-auto-lg">
            <li class="nav-item">
              <h1 id="title"></h1>
            </li>
            </ul>
        </div>

        <a id="settings-button-small" class="navbar-toggler" data-toggle="modal" data-target="#settings-modal"><img alt="settings" class="noll" src="src/img/image1.svg" /></a>
          <div class="d-none d-sm-block">
            <ul class="navbar-nav">
              <li class="nav-item active">
                <button id="settings-button-large" class="nav-link active" data-toggle="modal" data-target="#settings-modal"><img alt="settings" class="noll" src="src/img/image1.svg" />Settings</button>
              </li>
            </ul>
          </div>
      </nav>

      <div class="row justify-content-center d-sm-none mt-4">
        <h1 id="title2"></h1>
      </div>

      <div class="row justify-content-center" id="transcoder-warning" style="display:none;">
        <div class="col-12 alert alert-warning p-2 text-center">
          Please visit <a href="https://www.aptero.co/">aptero.co</a> to start your live stream.
        </div>
      </div>

      <div class="row justify-content-center" id="error-panel" style="display:none;">
          <div class="col-8 alert alert-danger alert-dismissible p-2">
            <button id="error-panel-close" type="button" class="close" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
            <div id="error-messages"></div>
          </div>
      </div>
    </div> <!--FIN CONTAINER-FLUID1-->

    <div class="container-fluid" id="content" style="margin-top: 5%;">  
      <div class="row justify-content-center">  
        <div class="col-md-8 col-sm-12">
          <div id="video-container" >
            <video class="view" id="publisher-video" autoplay playsinline muted style="pointer-events: none;"></video><noscript><video id="publisher-video" autoplay playsinline muted style="pointer-events: none;"></video></noscript>
            <div id="video-live-indicator">
              <span id="video-live-indicator-live" class="badge badge-pill badge-danger" style="display:none;">LIVE</span>
              <span id="video-live-indicator-error" class="badge badge-pill badge-warning" style="display:none;">ERROR</span>
            </div>

            <div  id="video-controls">
              <div id="control-button-wrapper">
                <div class="av-control-wrapper" >
                  <button id="test" class="d-none d-lg-inline av-control" onclick="left()" data-original-title="" title="" aria-describedby="popover71762" >
                    <img alt=""  src="src/img/fleche.svg"/>
                      <nav id="menu-haut">
                        <ul>
                          <li id="myList" onclick="callback(data)"></li>
                        </ul>
                      </nav>
    
                  </button>     
                </div>
                
                  <button id="mute-toggle" class="circle-button control-button">
                    <img alt="" class="noll" id="mute-off" src="src/img/micro.svg"/>
                    <img alt="" class="noll" id="mute-on" src="src/img/micro-muet.svg" style="display:none;"/>
                  </button>
                  <button id="publish-toggle" class="control-button left-offset-button" >Publish </button>
                  <button id="camera-toggle" class="circle-button control-button left-offset-button">
                    <img alt="" class="noll" id="video-off" src="src/img/video.svg" />
                    <img alt="" class="noll" id="video-on" src="src/img/video-fermer.svg" style="display:none;"/>
                  </button>
                
                  <button id="show-cameras-menu" class="d-none d-lg-inline av-control" >
                    <img alt="" id="test1" class="noll" src="src/img/fleche.svg" onclick="right()"/>
                    <nav id="menu-haut">
                      <ul>
                        <li id="myList1" style="list-style-type: none;"></li>
                      </ul>
                    </nav>
                  </button>
                
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row justify-content-center">
        <div class="col-md-8 col-sm-12 	d-none d-lg-block" id="hosted-page-url-container">
          <label for="hosted-page-url" >
            <!--button onclick="allo()">Try it</button>-->
              Input :
          </label>
          <div class="input-group mb-3">
            <!--<input id="hosted-page-url" class="form-control" type="text" placeholder ="rtmp://rtmp.aptero.co:1935/stream/7xi3wQPN" readonly/>-->
             <input id="hosted-page-url" class="form-control" type="text" placeholder = "inputValue" readonly/>  
          </div>

          <div id="settings-saved-toast" class="toast text-success" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-body text-center">
              Settings saved
            </div>
          </div>

          <div id="settings-modal" class="modal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">Settings</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <form id="publish-settings-form">
                  <input type="hidden" id="frameSize" name="frameSize" value="default" />
                  <input type="hidden" id="videoFrameRate" name="videoFrameRate" value="30" />
                  <div class="modal-body">
                    <div class="form-group">
                      <label for="output">Output</label>
                      <input type="text" class="form-control" id="output" name="output" maxlength="1024">
                    </div>
                    <div class="form-group d-block d-lg-none">
                      <label for="camera-list-select">
                        Input Camera
                      </label>
                      <select id="camera-list-select" class="form-control">
                      </select>
                    </div>
                    <div class="form-group d-block d-lg-none">
                      <label for="mic-list-select">
                        Input Microphone
                      </label>
                      <select id="mic-list-select" class="form-control">
                      </select>
                    </div>
                    <div class="form-group d-block d-lg-none" id="hosted-page-url-mobile-container">
                      <label for="hosted-page-url-mobile">
                        Your Live Streaming URL:
                      </label>
                      <div class="input-group mb-3">
                        <input id="hosted-page-url-mobile" class="form-control" type="text" readonly/>
                        <div class="input-group-append">
                          <a class="input-group-text" id="copy-hosted-page-mobile"><img alt="" class="noll" src="src/img/image2.svg" /></a>
                        </div>
                      </div>
                    </div>
                    <div class="form-group" id="streamHealth" style="display:none;">
                      <label>
                        Frame Size
                      </label>
                      <div id="streamHealthMessage"></div>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div> 

          <div id="browser-compatibility-modal" class="modal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">Unsupported Browser</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <p>We&#8217;re sorry, but your browser is not currently supported for WebRTC publishing.</p>
                  <p>Please reopen this page using the latest version of Chrome or Safari.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div> 
    </div> <!--FIN CONTAINER-FLUID2-->
  </div>  <!--FIN BUILD -->
     <script>
      window.addEventListener('click', () => {
      // // var SourceMover = document.querySelector('.JumpStreamer .view video')
      // // if (!SourceMover) return
      // //  intro.parentElement.removeChild(SourceMover)
     window.wbs = new WBS('div')
     }) 
    
     // ** LEFT ** //
      function display(node){
        var nodeA = document.createElement("LI"); 
        var textnodeA = document.createTextNode(node.name);
        nodeA.appendChild(textnodeA);   
        document.getElementById("myList").appendChild(nodeA);     
      }

      function left(){
        var inputs = window.wbs.opts.inputs;
        var audio;
        inputs.forEach(element => {
          audio = element.name;
          if (audio.includes("Audio") == true){
            console.log(element);
          }
          
        });

        inputs.forEach(nodeA =>{
          audio = nodeA.name; 
          if (audio.includes("Audio") == true){
           display(nodeA);
          }  
          
        });
        document.getElementById("test").onclick = function() {myFunction()};  
         function myFunction() {
         document.getElementById("myList").classList.toggle("show");
        }  
      }

      //** RIGHT **//
      function display1(node1){
        var nodeB = document.createElement("LI"); 
        var textnodeB = document.createTextNode(node1.name);
        nodeB.appendChild(textnodeB);   
        document.getElementById("myList1").appendChild(nodeB);     
      }
      function right(){
        var inputs = window.wbs.opts.inputs;
        inputs.forEach(element => {
          console.log(element);
        });
        inputs.forEach(nodeB =>{
          audio = nodeB.name; 
          if (audio.includes("Audio") == false){
            display1(nodeB);
          }
        });
        document.getElementById("test1").onclick = function() {myFunction()};  
      //   // function myFunction() {
      //   // document.getElementById("myList1").classList.toggle("show");
      //   // } 
      
       }
        // //  function test1(){
        //    alert("123");
        //  }
      
        
    </script> 
    
  </body>
</html>

			